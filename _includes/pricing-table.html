<style>
    .pricing-wrapper {
      display: flex;
      gap: 2rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 3rem;
      width: 95%; /* Increased from default to ensure content fits on mobile */
      max-width: 1200px; /* Reduced from 1400px for 3-box layout */
      margin-left: auto;
      margin-right: auto;
    }
    
    .pricing-box {
      flex: 0 0 calc(33.33% - 2rem); /* Changed to 3-box layout */
      box-sizing: border-box;
      min-width: 280px; /* Increased minimum width */
      max-width: 380px; /* Increased maximum width */
      text-align: center;
      transition: transform 0.3s ease;
      width: calc(33.33% - 2rem); /* Changed to 3-box layout */
    }
    
    .pricing-box:hover {
      /* Remove the upward translation */
      transform: none;
    }
    
    .inner-pricing-box {
      display: flex;
      flex-direction: column;
      height: 420px; /* Increased height for calculator */
      padding: 2.5rem 2rem;
      border: none;
      border-radius: 12px;
      background-color: #fff;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
      transition: box-shadow 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .pricing-box:hover .inner-pricing-box {
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
    }

    .inner-pricing-box.trial {
        border: 2px solid #000000;
    }
    
    .inner-pricing-box.popular {
        border: none;
        background: linear-gradient(145deg, #ffffff, #f8fbff);
    }
    
    .popular-badge {
        position: absolute;
        top: 0;
        right: 0;
        background: var(--blue-highlight);
        color: white;
        font-size: 0.8rem;
        padding: 0.4rem 1.2rem;
        border-bottom-left-radius: 8px;
        font-weight: 600;
        letter-spacing: 0.5px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    /* 4 Sections for each pricing box */
    .section-title {
      padding: 0.7rem 0;
      height: 60px;  /* Fixed height */
      margin-bottom: 0.8rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .section-description {
      padding: 0.7rem 0;
      height: 90px;  /* Increased height for calculator input */
      margin-bottom: 0.8rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .section-price {
      padding: 0.7rem 0;
      height: 80px;  /* Fixed height */
      margin-bottom: 0.8rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .section-button {
      padding: 0.5rem 0;
      height: 70px;  /* Fixed height */
      margin-top: auto;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Title Section */
    .section-title h2 {
      font-size: 1.7rem;
      margin: 0;
      font-weight: 600;
      color: #333;
      line-height: 1.3;
    }
    
    /* Pricing Box Title Styling - smaller and more compact */
    .pricing-box .section-title h2 {
      font-size: 1.8rem;
      font-weight: 500;
      line-height: 1.2;
      max-width: 280px;
      margin: 0 auto;
      color: #444;
    }
    
    /* Description Section */
    .section-description p {
      margin: 0;
      color: #555;
      line-height: 1.6;
    }
    
    /* Price Section */
    .section-price .dollars {
      font-size: 2.2rem;
      margin: 0;
      font-weight: 500;
      color: #000000;
    }
    
    .fetching-price {
        font-size: 1.5rem;
        opacity: 0.7;
        font-style: italic;
        color: #666;
    }
    
    /* Button Section */
    .section-button button {
      display: block;
      padding: 10px 20px;
      font-size: 14px;
      font-weight: 600;
      border-radius: 4px;
      cursor: pointer;
      min-width: 160px;
      margin: 0 auto;
      transition: all 0.3s ease;
      /* Primary button styling (like button-black.html) */
      background-color: #000;
      color: #fff;
      border: 1px solid #000;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .section-button button:hover {
      background-color: #1e90ff;
      color: #fff;
      border: 1px solid transparent;
      /* Remove the upward translation */
      transform: none;
    }
    
    .section-button .secondary-button {
      /* Transparent button styling (like button-transparent-black.html) */
      background-color: transparent;
      color: #000;
      border: 1px solid #000;
      box-shadow: none;
    }
    
    .section-button .secondary-button:hover {
      background-color: #1e90ff;
      color: #fff;
      border: 1px solid transparent;
    }

    .lead {
        font-weight: 500;
        color: #555;
        font-size: 1.5rem;
        margin-bottom: 1rem;
        letter-spacing: 0.01em;
        font-family: inherit;
    }

    .license-explainer {
        flex: 1 1 100%;
        max-width: 800px;
        text-align: center;
        margin-top: 3rem;
        font-style: italic;
        margin-left: auto;
        margin-right: auto;
        color: #666;
        line-height: 1.6;
        padding: 1.5rem;
        /* background-color: rgba(245, 247, 250, 0.7); */
        border-radius: 10px;
    }

    /* Device Calculator Styles */
    .device-calculator {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.8rem;
    }
    
    .device-input-group {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .device-input {
        width: 80px;
        height: 40px;
        border: 1px solid #ddd;
        border-radius: 0;
        text-align: center;
        font-size: 16px;
        font-weight: 600;
        background-color: #fff;
        transition: border-color 0.3s ease;
        transform: translateY(6px);
        /* Hide number input spinners */
        -webkit-appearance: none;
        -moz-appearance: textfield;
    }
    
    .device-input::-webkit-outer-spin-button,
    .device-input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
    
    .device-input:focus {
        outline: none;
        border-color: var(--blue-highlight);
    }
    
    .device-input:invalid {
        border-color: #ff6b6b;
    }
    
    .pricing-formula {
        font-size: 1.4rem;
        color: #666;
        text-align: center;
        line-height: 1.4;
        margin-top: 0.5rem;
    }

    @media (max-width: 768px) {
      .pricing-wrapper {
        flex-direction: column; /* Stack boxes on mobile */
        justify-content: center;
        width: 98%; /* Take up more width on smaller screens */
        gap: 1.5rem; /* Reduce the gap for better fit */
        align-items: center;
      }
      .pricing-box {
        flex: 0 0 calc(100% - 1.5rem);
        width: calc(100% - 1.5rem);
        max-width: 400px; /* Allow cards to expand but set reasonable max */
        margin-bottom: 1.5rem;
      }
      .inner-pricing-box {
        padding: 2rem 1.5rem; /* Slightly reduce padding */
      }
    }

    @media (max-width: 480px) {
      .pricing-wrapper {
        flex-direction: column;
        align-items: center;
        width: 95%; /* Slightly narrower than parent */
      }
      .pricing-box {
        flex: 0 0 100%;
        width: 100%;
        max-width: 100%;
      }
      .inner-pricing-box {
        padding: 1.8rem 1.2rem; /* Further reduce padding */
      }
      .section-title h2 {
        font-size: 1.5rem; /* Slightly reduce font size */
      }
      .lead {
        font-size: 1.3rem; /* Slightly reduce font size */
      }
    }

    /* Main heading - match with "Eagle Eyes Pilot for Android" on index.html */
    .pricing-header {
        /* Reset any custom styling */
        text-align: center;
        padding-left: 20px;
        padding-right: 20px;
    }
    
    .pricing-header h2 {
        text-align: center;
        margin-bottom: 30px; /* mb-30 equivalent */
        font-weight: inherit; /* Use the default h2 weight from your main stylesheet */
        font-size: inherit; /* Use the default h2 size from your main stylesheet */
        color: inherit; /* Use the default h2 color from your main stylesheet */
        line-height: inherit;
        letter-spacing: inherit;
    }

    /* Subheading - increase size and ensure font consistency */
    .pricing-header p {
        text-align: center;
        max-width: 800px;
        margin: 0 auto 3rem;
        color: #555;
        font-size: 1.8rem;
        line-height: 1.6;
        font-weight: 400;
        font-family: inherit;
    }

    /* Info links container styling */
    .info-links-container {
        text-align: center;
        margin: 2rem auto 3rem;
        max-width: 600px;
        padding: 1rem;
        font-size: 1.5rem;
        /* background-color: #f9f9f9;
        border-radius: 8px; */
    }
    
    .info-links-container p {
        margin-bottom: 0.8rem;
        color: #444;
    }
    
    .info-links-container p:last-child {
        margin: 0;
    }
    
    .info-links-container a {
        color: var(--blue-highlight);
        font-weight: 500;
        text-decoration: none;
        transition: all 0.3s ease;
    }
    
    .info-links-container a:hover {
        text-decoration: underline;
    }
    
    .info-links-container .flag {
        margin-left: 5px;
    }
</style>
  
  <div style="margin-top: 14rem; margin-bottom: 5rem;">
    <div class="pricing-header">
        <h2 style="margin-bottom: 30px; font-weight: 300; font-size: 2.8rem; color: #333; line-height: 1.2; text-align: center;">Choose Your Plan</h2>
        <p>Select the license that's right for your team.<br>All plans are for an annual subscription and include full access to all Eagle Eyes products and features.</p>
    </div>
    
    <div class="info-links-container">
      <p>Looking for Eagle Eyes Scan downloads? <a href="{{ '/account/' | relative_url }}">Create or access your account here.</a></p>

    </div>
    
    <!-- <div id="fetchingDiv" style="text-align: center; margin-bottom: 2rem;">⏳ Fetching pricing data...</div> -->
    <section class="section-container" style="padding: 0 0 4rem 0; margin-top: 8rem; max-width: 1400px; margin-left: auto; margin-right: auto;">
      <div class="pricing-wrapper">
        <!-- Trial Box -->
        <div class="pricing-box">
          <p class="lead">Evaluate first</p>
          <div class="inner-pricing-box trial">
            <div class="section-title">
              <h2>Free Trial</h2>
            </div>
            <div class="section-description">
              <p>30 days for free<br>No credit card required</p>
            </div>
            <div class="section-price">
              <p class="dollars">USD $0</p>
            </div>
            <div class="section-button">
              <button class="secondary-button" style="min-width: 160px;">Request trial</button>
            </div>
          </div>
        </div>
        
        <!-- Device Calculator Box -->
        <div class="pricing-box">
          <p class="lead">Flexible pricing for any team size</p>
          <div class="inner-pricing-box popular">
             <!-- <div class="popular-badge">RECOMMENDED</div> -->
            <div class="section-title">
              <h2>Select number of devices</h2>
            </div>
            <div class="section-description">
              <div class="device-calculator">
                <div class="device-input-group">
                  <div style="display: flex; align-items: center; justify-content: center; gap: 0;">
                    <button id="decreaseDevices" style="width: 35px; height: 40px; border: none; background: transparent; border-radius: 4px 0 0 4px; cursor: pointer; font-size: 18px; font-weight: 900;">−</button>
                    <input type="number" id="deviceCount" class="device-input" min="1" max="12" value="1">
                    <button id="increaseDevices" style="width: 35px; height: 40px; border: none; background: transparent; border-radius: 0 4px 4px 0; cursor: pointer; font-size: 18px; font-weight: 900;">+</button>
                    <span style="font-size: 14px; color: #666; margin-left: 8px;">device(s)</span>
                  </div>
                </div>
                <div class="pricing-formula">
                  USD $400 for 1st device<br>
                  +USD $150 per additional device
                </div>
              </div>
            </div>
            <div class="section-price">
              <p class="dollars" id="calculatedPrice">USD $400</p>
            </div>
            <div class="section-button">
              <button style="min-width: 160px;" id="purchaseButton">Continue</button>
            </div>
          </div>
        </div>
        
        <!-- Organizations Box -->
        <div class="pricing-box">
          <p class="lead">Custom pricing for larger organizations</p>
          <div class="inner-pricing-box">
            <div class="section-title">
              <h2>Tailored solutions</h2>
            </div>
            <div class="section-description">
              <p>Volume discounts<br>Custom integrations<br>Dedicated support</p>
            </div>
            <div class="section-price">
              <p class="dollars">Custom pricing</p>
            </div>
            <div class="section-button">
              <button style="min-width: 160px;">Contact Us</button>
            </div>
          </div>
        </div>
        
        <div class="license-explainer">
          <h4 style="margin-bottom: 15px; font-weight: 500; text-align: center; color: #333; font-style: normal;">License Terms and Options</h4>
          <div style="text-align: center; max-width: 700px; margin: 0 auto; line-height: 1.8; font-style: normal;">
            <p style="margin-bottom: 4px; text-align: center;">A verified account is required to purchase a license. Verification typically takes 1–3 business days.</p>
            <p style="margin-bottom: 4px; text-align: center; font-size: 20px;">•</p>
            <p style="margin-bottom: 4px; text-align: center;">Licenses are valid for use on any supported device. Once activated, the license is permanently associated with the device and cannot be transferred to another device. In special cases such as a lost device or other unexpected issues, the Eagle Eyes team can help transfer the license to a new device on a case-by-case basis.</p>
            <p style="margin-bottom: 4px; text-align: center; font-size: 20px;">•</p>
            <p style="margin-bottom: 0; text-align: center;">Additional devices can be added at any time for a one-time fee of $20 for each month remaining in your current license term. For example, if you have 3 months left, the cost would be $60.</p>
          </div>
        </div>
      </div>
    </section>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize device count calculator
        const deviceInput = document.getElementById('deviceCount');
        const decreaseBtn = document.getElementById('decreaseDevices');
        const increaseBtn = document.getElementById('increaseDevices');
        const priceDisplay = document.getElementById('calculatedPrice');
        const purchaseButton = document.getElementById('purchaseButton');
        
        function calculatePrice(deviceCount) {
            if (deviceCount < 1) return 400;
            if (deviceCount > 12) deviceCount = 12; // Cap at 12 devices
            if (deviceCount === 1) return 400;
            return 400 + (deviceCount - 1) * 150;
        }
        
        function updatePrice() {
            let deviceCount = parseInt(deviceInput.value) || 1;
            
            // Ensure device count is within valid range
            if (deviceCount > 12) {
                deviceCount = 12;
                deviceInput.value = 12;
            }
            if (deviceCount < 1) {
                deviceCount = 1;
                deviceInput.value = 1;
            }
            
            const price = calculatePrice(deviceCount);
            priceDisplay.textContent = `USD $${price.toLocaleString()}`;
            
            // Update button data attributes for purchase
            purchaseButton.setAttribute('data-device-count', deviceCount);
        }
        
        // Handle input field changes (keyboard input)
        deviceInput.addEventListener('input', updatePrice);
        deviceInput.addEventListener('change', updatePrice);
        
        // Handle decrease button
        decreaseBtn.addEventListener('click', function() {
            let currentValue = parseInt(deviceInput.value) || 1;
            if (currentValue > 1) {
                deviceInput.value = currentValue - 1;
                updatePrice();
            }
        });
        
        // Handle increase button  
        increaseBtn.addEventListener('click', function() {
            let currentValue = parseInt(deviceInput.value) || 1;
            if (currentValue < 12) {
                deviceInput.value = currentValue + 1;
                updatePrice();
            }
        });
        
        // Initialize with default value
        updatePrice();
        
        // Add click handlers to buttons
        document.querySelectorAll('.pricing-box').forEach((box, index) => {
            const button = box.querySelector('.section-button button');
            
            switch(index) {
                case 0: // First box (Trial)
                    button.addEventListener('click', function() {
                        const url = new URL(getUrlWithEmulatorParam('{{ "/account/?reason=trial" | relative_url }}'), window.location.origin);
                        // Add machine_id if present in current URL
                        const currentMachineId = new URLSearchParams(window.location.search).get('machine_id');
                        if (currentMachineId) {
                            url.searchParams.set('machine_id', currentMachineId);
                        }
                        window.location.href = url.toString();
                    });
                    break;
                    
                case 1: // Device Calculator
                    button.addEventListener('click', function() {
                        const deviceCount = this.getAttribute('data-device-count');
                        
                        // Create a URL that includes device count information
                        const url = new URL(getUrlWithEmulatorParam('{{ "/account/?reason=purchase" | relative_url }}'), window.location.origin);
                        url.searchParams.set('device_count', deviceCount);
                        
                        // Add machine_id if present in current URL
                        const currentMachineId = new URLSearchParams(window.location.search).get('machine_id');
                        if (currentMachineId) {
                            url.searchParams.set('machine_id', currentMachineId);
                        }
                        
                        window.location.href = url.toString();
                    });
                    break;
                    
                case 2: // Organizations (last box)
                    button.addEventListener('click', function() {
                        window.scrollTo({
                            top: document.documentElement.scrollHeight,
                            behavior: 'smooth'
                        });
                    });
                    break;
            }
        });
    });
    
    // Helper function to preserve emulator parameter
    function getUrlWithEmulatorParam(url) {
        const isEmulator = new URLSearchParams(window.location.search).get('is_emulator') === 'true';
        if (!isEmulator) return url;
        
        const separator = url.includes('?') ? '&' : '?';
        return url.includes('is_emulator=true') ? url : `${url}${separator}is_emulator=true`;
    }
  </script>