<style>
    .pricing-container {
      display: flex;
      justify-content: center;
      gap: 1rem;
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 1rem;
    }
    
    .pricing-box {
      flex: 1;
      max-width: 600px;
      background: white;
      border: 2px solid #e9ecef;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
      transition: box-shadow 0.3s ease;
    }
    
    .pricing-box:hover {
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
    }
    
    .pricing-box-header {
      background: linear-gradient(135deg, #f8f9fa 0%, #e3f2fd 100%);
      border-bottom: 3px solid #dee2e6;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 2rem 2rem 1.5rem;
      text-align: center;
      min-height: 380px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }
    
    .header-top-section {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding-top: 1rem;
      height: 160px;
      flex-shrink: 0;
      box-sizing: border-box;
    }
    
    .header-top-section > p:first-child {
      margin: 0 0 0.3rem 0;
    }
    
    .section-description {
      margin-bottom: 0;
      margin-top: 0.3rem;
    }
    
    .section-description p {
      margin: 0;
      line-height: 1.3;
    }
    
    /* Adjust Free column description to reduce spacing */
    .pricing-box:first-child .section-description {
      margin-bottom: 0;
      min-height: 0;
    }
    
    .header-bottom-section {
      margin-top: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 1rem;
      flex: 1;
      justify-content: flex-start;
    }
    
    /* Ensure prices start at same vertical position */
    .header-bottom-section .section-price {
      margin-top: 0;
      padding-top: 0;
      margin-bottom: 0;
    }
    
    /* Align Free column price with others - add extra padding to match content height */
    .pricing-box:first-child .header-bottom-section {
      padding-top: 1.2rem;
    }
    
    /* Reduce spacing in billing notes */
    .header-bottom-section p[id*="billingNote"] {
      margin-top: 0.3rem;
      line-height: 1.3;
    }
    
    /* Tooltip styles for billing info icon */
    .billing-info-icon {
      display: inline-block;
      position: relative;
      cursor: help;
      margin-left: 0.3rem;
      color: #666;
      font-size: 1rem;
      vertical-align: middle;
    }
    
    .billing-info-icon .tooltip {
      visibility: hidden;
      opacity: 0;
      background-color: #333;
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 8px 12px;
      position: absolute;
      z-index: 1000;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      white-space: nowrap;
      font-size: 1.2rem;
      transition: opacity 0.3s, visibility 0.3s;
      pointer-events: none;
    }
    
    .billing-info-icon .tooltip::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-top-color: #333;
    }
    
    .billing-info-icon:hover .tooltip {
      visibility: visible;
      opacity: 1;
    }
    
    /* Tooltip styles */
    .billing-info-icon {
      display: inline-block;
      position: relative;
      cursor: help;
      margin-left: 0.3rem;
      color: #666;
      font-size: 1rem;
      vertical-align: middle;
    }
    
    .billing-info-icon .tooltip {
      visibility: hidden;
      opacity: 0;
      background-color: #333;
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 8px 12px;
      position: absolute;
      z-index: 1000;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      white-space: nowrap;
      font-size: 1.2rem;
      transition: opacity 0.3s, visibility 0.3s;
      pointer-events: none;
    }
    
    .billing-info-icon .tooltip::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-top-color: #333;
    }
    
    .billing-info-icon:hover .tooltip {
      visibility: visible;
      opacity: 1;
    }
    
    .section-info {
      order: -1;
      margin-bottom: 1rem;
    }
    
    .pricing-box-content {
      padding: 2rem;
    }
    
    .pricing-box-features {
      margin-top: 2rem;
    }
    
    .feature-item {
      padding: 1rem 0;
      border-bottom: 1px solid #e9ecef;
      color: #333;
      font-size: 1.5rem;
      line-height: 1.5;
      cursor: pointer;
      transition: background-color 0.2s ease;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .feature-item:hover {
      background-color: #f8f9fa;
    }
    
    .feature-dropdown {
      display: none;
      padding: 1rem;
      background-color: #f8f9fa;
      border-top: 1px solid #e9ecef;
      font-size: 1.4rem;
      line-height: 1.6;
      color: #555;
    }
    
    .feature-dropdown.show {
      display: block;
    }
    
    .feature-item:last-child {
      border-bottom: none;
    }
    
    .feature-item.empty {
      color: transparent;
      border-bottom: none;
    }
    
    .early-release-badge {
      display: inline-block;
      background: #fd7e14;
      color: white;
      font-size: 0.75rem;
      font-weight: 600;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      opacity: 0.7;
      flex-shrink: 0;
      margin-left: 1rem;
    }
    
    .lead {
      font-size: 28px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #333;
    }
    
    .section-description {
      margin-bottom: 1.5rem;
    }
    
    .section-description p {
      margin: 0;
      color: #555;
      line-height: 1.6;
      font-size: 1.3rem;
    }
    
    .section-title {
      margin-bottom: 1rem;
    }
    
    .section-title h2 {
      font-size: 1.6rem;
      margin: 0;
      font-weight: 600;
      color: #333;
      line-height: 1.3;
      text-align: center;
    }
    
    .section-price {
      margin: 0;
      text-align: center;
    }
    
    .section-price.free-price {
      margin-top: 0;
      margin-bottom: 1.5rem;
    }
    
    .section-price .dollars {
      font-size: 2.2rem;
      margin: 0;
      font-weight: 500;
      color: #000000;
      line-height: 1.2;
    }
    
    .section-button {
      margin: 1.5rem 0 0 0;
      text-align: center;
    }
    
    /* Ensure consistent button spacing from price */
    .header-bottom-section .section-button {
      margin-top: 1.5rem;
    }
    
    .section-button button {
      display: block;
      padding: 10px 20px;
      font-size: 14px;
      font-weight: 600;
      border-radius: 4px;
      cursor: pointer;
      min-width: 160px;
      margin: 0 auto;
      transition: all 0.3s ease;
      background-color: #000;
      color: #fff;
      border: 1px solid #000;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .section-button button:hover {
      background-color: #1e90ff;
      color: #fff;
      border: 1px solid transparent;
      transform: none;
    }
    
    .section-button .secondary-button {
      background-color: transparent;
      color: #000;
      border: 1px solid #000;
      box-shadow: none;
    }
    
    .section-button .secondary-button:hover {
      background-color: #1e90ff;
      color: #fff;
      border: 1px solid transparent;
    }
    
    .section-info {
      margin-top: 0;
      margin-bottom: 1rem;
      text-align: center;
    }
    
    .section-price.free-price {
      margin-top: 0;
      margin-bottom: 1rem;
    }
    
    .section-info button {
      background: none;
      border: none;
      color: #007bff;
      font-size: 14px;
      cursor: pointer;
      padding: 8px 12px;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      gap: 5px;
      text-decoration: underline;
    }
    
    /* Device Calculator Styles */
    .device-calculator {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.8rem;
    }

    .device-input-group {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
      justify-content: center;
      width: 100%;
    }
    
    .device-input {
      width: 80px;
      height: 40px;
      border: 1px solid #ddd;
      border-radius: 0;
      text-align: center;
      font-size: 16px;
      font-weight: 600;
      background-color: #fff;
      transition: border-color 0.3s ease;
      transform: translateY(6px);
      -webkit-appearance: none;
      -moz-appearance: textfield;
    }
    
    .device-input::-webkit-outer-spin-button,
    .device-input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    
    .device-input:focus {
      outline: none;
      border-color: var(--blue-highlight);
    }
    
    .device-input:invalid {
      border-color: #ff6b6b;
    }
    
    .pricing-formula {
      font-size: 2.2rem;
      color: #000000;
      text-align: center;
      line-height: 1.4;
      margin: 0;
      font-weight: 500;
    }
    
    .pricing-formula strong {
      font-weight: 500;
    }
    
    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      align-items: center;
      justify-content: center;
    }
    
    .modal-content {
      background-color: #fefefe;
      margin: 20px;
      padding: 30px;
      border-radius: 12px;
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      box-shadow: 0 8px 30px rgba(0,0,0,0.3);
      position: relative;
      overflow-y: auto;
    }
    
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      position: absolute;
      top: 15px;
      right: 20px;
      cursor: pointer;
    }
    
    .close:hover,
    .close:focus {
      color: #000;
      text-decoration: none;
    }
    
    .modal h3 {
      margin-top: 0;
      margin-bottom: 20px;
      color: #333;
      font-size: 1.5rem;
      font-weight: 600;
    }
    
    .modal p {
      margin-bottom: 15px;
      line-height: 1.6;
      color: #555;
    }
    
    .modal .bullet {
      text-align: center;
      font-size: 20px;
      color: #007bff;
      margin: 20px 0;
    }

    /* Main heading - match with "Eagle Eyes Pilot for Android" on index.html */
    .pricing-header {
      text-align: center;
      padding-left: 20px;
      padding-right: 20px;
    }
    
    .pricing-header h2 {
      text-align: center;
      margin-bottom: 30px;
      font-weight: inherit;
      font-size: inherit;
      color: inherit;
      line-height: inherit;
      letter-spacing: inherit;
    }

    /* Subheading - increase size and ensure font consistency */
    .pricing-header p {
      text-align: center;
      max-width: 800px;
      margin: 0 auto 3rem;
      color: #555;
      font-size: 1.8rem;
      line-height: 1.6;
      font-weight: 400;
        font-family: inherit;
    }
    
    /* Billing Toggle Styles */
    .billing-toggle-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      margin: 2rem auto 3rem;
      max-width: 600px;
    }
    
    .billing-toggle-label {
      font-size: inherit;
      font-family: inherit;
      color: #666;
      font-weight: inherit;
      transition: color 0.3s ease;
    }
    
    .billing-toggle-label.active {
      color: #333;
      font-weight: inherit;
    }
    
    .billing-toggle {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 30px;
    }
    
    .billing-toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .billing-toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 30px;
    }
    
    .billing-toggle-slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    
    .billing-toggle input:checked + .billing-toggle-slider {
      background-color: #28a745;
    }
    
    .billing-toggle input:checked + .billing-toggle-slider:before {
      transform: translateX(30px);
    }
    
    .billing-savings {
      color: #28a745;
      font-size: inherit;
      font-family: inherit;
      font-weight: inherit;
    }

    /* Info links container styling */
    .info-links-container {
        text-align: center;
      margin: 0.5rem auto 1rem;
      max-width: 600px;
      padding: 0.5rem;
      font-size: 1.5rem;
    }
    
    .info-links-container p {
      /* Allow natural text wrapping */
    }
    
    .info-links-container p {
      margin-bottom: 0.8rem;
      color: #444;
    }
    
    .info-links-container p:last-child {
        margin: 0;
    }
    
    .info-links-container a {
      color: var(--blue-highlight);
      font-weight: 500;
      text-decoration: none;
      transition: all 0.3s ease;
    }
    
    .info-links-container a:hover {
      text-decoration: underline;
    }
    
    .info-links-container .flag {
      margin-left: 5px;
    }

    @media (max-width: 768px) {
      .pricing-container {
        flex-direction: column;
        gap: 1.5rem;
        padding: 0 1rem;
      }
      
      .pricing-box {
        max-width: none;
      }
      
      .device-calculator {
        gap: 0.5rem;
      }
      
      .pricing-formula {
        font-size: 1.1rem;
      }
      
      .section-title h2 {
        font-size: 1.4rem;
      }
      
      .lead {
        font-size: 1.2rem;
      }
      
      .pricing-header p {
        font-size: 1.5rem;
      }
      
      .info-links-container p {
        /* Allow natural text wrapping on mobile */
      }
    }

    @media (max-width: 480px) {
      .pricing-container {
        gap: 1rem;
        padding: 0 0.5rem;
      }
      
      .pricing-box-header {
        padding: 1.5rem 1rem 1rem;
      }
      
      .pricing-box-content {
        padding: 1.5rem;
      }
      
      .section-title h2 {
        font-size: 1.3rem;
      }
      
      .lead {
        font-size: 1.1rem;
      }
      
      .device-input {
        width: 50px;
        height: 30px;
        font-size: 12px;
      }
      
      .pricing-formula {
        font-size: 1rem;
      }
      
      .dollars {
        font-size: 1.8rem !important;
      }
      
    .pricing-header p {
        font-size: 1.3rem;
        white-space: normal;
        overflow: visible;
        text-overflow: clip;
      }
    }
    
    /* Video Modal Styles */
    .video-modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      overflow: hidden;
    }
    
    .video-modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }
    
    .video-modal-content {
      position: relative;
      width: 90%;
      max-width: 1200px;
      margin: auto;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .video-modal-close {
      position: absolute;
      top: 10px;
      right: 10px;
      color: #fff;
      font-size: 36px;
      font-weight: bold;
      cursor: pointer;
      z-index: 10001;
      background: rgba(0, 0, 0, 0.7);
      border-radius: 50%;
      width: 45px;
      height: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
      transition: background 0.2s ease;
      border: 2px solid rgba(255, 255, 255, 0.3);
    }
    
    .video-modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.5);
    }
    
    .video-modal-iframe-container {
      position: relative;
      width: 100%;
      padding-bottom: 56.25%;
      height: 0;
      overflow: hidden;
      background: #000;
      border-radius: 8px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
    }
    
    .video-modal-iframe-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      border-radius: 8px;
    }
</style>
  
  <div style="margin-top: 14rem; margin-bottom: 5rem;">
    <div class="pricing-header">
        <h2 style="margin-bottom: 10px; font-weight: 300; font-size: 2.8rem; color: #333; line-height: 1.2; text-align: center;">Pricing</h2>
        <div class="billing-toggle-container">
          <span class="billing-toggle-label" id="billingLabelMonthly">Billed monthly</span>
          <label class="billing-toggle">
            <input type="checkbox" id="billingToggle" checked>
            <span class="billing-toggle-slider"></span>
          </label>
          <span class="billing-toggle-label active" id="billingLabelAnnual">Billed annually</span>
          <span class="billing-savings" id="billingSavings">(Save up to 33%)</span>
        </div>
    </div>
    

    
    <div class="pricing-container">
                           <!-- Free Plan Box -->
         <div class="pricing-box">
           <div class="pricing-box-header">
             <div class="header-top-section">
               <p style="font-size: 28px; font-weight: bold; color: #333;">Free</p>
                <div class="section-description">
                  <p>Access Eagle Eyes basic features for free.</p>
                </div>
              </div>
             <div class="header-bottom-section">
               <div class="section-price free-price" style="margin-top: 0;">
                <p class="dollars" style="margin: 0;">USD $0</p>
                <p style="font-size: 1.2rem; color: #666; margin-top: 0.5rem; text-align: center; min-height: 2.5rem; visibility: hidden;">&nbsp;</p>
              </div>
              <div class="section-button" style="text-align: center; margin-top: 0;">
                <form action="{{ '/geteagleeyes/' | relative_url }}" method="get" style="display: inline-block;">
                  <button type="submit" class="secondary-button" style="min-width: 160px;">Get Eagle Eyes</button>
                </form>
              </div>
             </div>
           </div>
        <div class="pricing-box-content">
          <div class="pricing-box-features">
            <div class="feature-item" onclick="toggleFeatureDropdown('free-feature-1')">
              <span>Upload drone GPS tracks to CalTopo (post flight)</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="free-feature-1">
              Fly online or offline in Eagle Eyes Pilot [Pro] or DJI Pilot 2, then quickly upload your drone's GPS tracks to CalTopo once you're back in service.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=kL0-SSLd23c'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('free-feature-2')">
              <span>Convert CalTopo search areas into DJI flight mission plans</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="free-feature-2">
              Easily turn CalTopo search areas into KML files and import them into DJI Pilot 2 as ready-to-fly mission plans.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=0i_ph36RUqE'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('free-feature-3')">
              <span>AirOps map view with live multi-drone tracking and Caltopo connection</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="free-feature-3">
              When connected to the same local Wi-Fi network as drone controllers broadcasting their locations to the Eagle Eyes AirOps map (location broadcast is possible while flying in either Eagle Eyes Pilot [Pro] or DJI Pilot 2), view the AirOps map on your android device and see near-zero latency live multi-drone positions overlaid on CalTopo map features.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=__i8BL0HGOU&t=5s'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('free-feature-4')">
              <span>Eagle Eyes live stream viewer</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="free-feature-4">
              The <a href="https://www.eagleeyessearch.com/livestream/" target="_blank" rel="noopener" style="color: #007bff; text-decoration: underline;">Eagle Eyes Viewer</a> allows multiple drones to stream their live video and telemetry to remote observers. Once a drone pilot activates live streaming from Eagle Eyes Pilot (requires Pro account in Eagle Eyes Pilot) and shares a live stream link via QR code, URL, or unique join code, each drone appears on the viewer's device. Displayed on a shared map, with real-time position, altitude and synced Caltopo map objects. Viewers can then easily switch between drone live streams and share the stream on to others, enabling situational awareness and coordination whether you're beside the pilot or monitoring from a remote operations center.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://youtu.be/2U1mS0QmBrU'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('free-feature-5')">
              <span>Track Pilot and Aircraft Logs</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="free-feature-5">
              A complete flight history system that captures your GPS tracks, telemetry, and aircraft data in one place. Review where you flew, how the drone performed, and keep a clear record of your aircraft's activity, similar to an integrated AirData-style logbook.
            </div>
          </div>
        </div>
      </div>

                           <!-- Middle Plan Box (Pro Replica) -->
         <div class="pricing-box">
           <div class="pricing-box-header">
             <div class="header-top-section">
               <p style="font-size: 28px; font-weight: bold; color: #333;">Pro</p>
               <div class="section-description">
                 <p>Access Eagle Eyes Pilot drone piloting app.<br><button id="infoButtonPro" onclick="document.getElementById('infoModalPro').style.display='flex';" style="background: none; border: none; color: #007bff; font-size: inherit; cursor: pointer; padding: 0; text-decoration: underline; font-family: inherit; margin-top: 0.5rem;">ⓘ License Terms and Options</button></p>
               </div>
             </div>
             <div class="header-bottom-section">
               <div class="section-price free-price" style="margin-top: 0;">
                 <p class="pricing-formula" id="pricingFormulaMiddle" style="margin: 0;">
                   <strong>USD $400 / year</strong> for 1st device<br>
                   +<strong>USD $150 / year</strong> per additional device
                 </p>
                 <p id="billingNoteMiddle" style="font-size: 1.2rem; color: #666; margin-top: 0.5rem; text-align: center; min-height: 2.5rem;"></p>
               </div>
               <div class="section-button" style="display: flex; flex-direction: column; align-items: center; justify-content: center; margin-top: 0;">
                 <button class="secondary-button" style="min-width: 160px; margin-bottom: 0.5rem;" id="tryItFreeButtonMiddle">Try it free</button>
                 <p style="font-size: 1.2rem; color: #666; margin: 0; text-align: center;">Free 7-day trial.</p>
               </div>
             </div>
           </div>
           
           <!-- Device Selection Dropdown (Hidden Initially) -->
           <div id="deviceSelectionSectionMiddle" style="display: none; padding: 2rem; background: #f8f9fa; border-top: 1px solid #e9ecef;">
              <div class="section-title">
                <h2>Select number of devices</h2>
              </div>
              <div class="section-description">
                <div class="device-calculator">
                  <div class="device-input-group">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 0;">
                      <button id="decreaseDevicesMiddle" style="width: 35px; height: 40px; border: none; background: transparent; border-radius: 4px 0 0 4px; cursor: pointer; font-size: 18px; font-weight: 900;">−</button>
                      <input type="number" id="deviceCountMiddle" class="device-input" min="1" max="12" value="1">
                      <button id="increaseDevicesMiddle" style="width: 35px; height: 40px; border: none; background: transparent; border-radius: 0 4px 4px 0; cursor: pointer; font-size: 18px; font-weight: 900;">+</button>
                   </div>
                   <div style="text-align: center; margin-top: 8px;">
                     <span style="font-size: 16px; color: #666;">device(s)</span>
                    </div>
                  </div>
                  <div class="pricing-formula">
                    <span id="customPricingTextMiddle" style="font-size: 1.1rem; color: #888; font-style: italic; display: none;">* Custom pricing available for large organizations<br>
                    <a href="mailto:info@eagleeyessearch.com" style="color: var(--blue-highlight); text-decoration: none;">inquire at: info@eagleeyessearch.com</a></span>
                  </div>
                </div>
              </div>
              <div class="section-price">
                <p class="dollars" id="calculatedPriceMiddle">USD $400</p>
                <p style="font-size: 1.1rem; color: #666; margin-top: 0.5rem; line-height: 1.4;">Additional devices can be added at any time for a one-time fee of $20 for each month remaining in your current license term. For example, if you have 3 months left, the cost would be $60.</p>
              </div>
             
              <div class="section-button">
                <button style="min-width: 160px;" id="purchaseButtonMiddle">Continue</button>
              </div>
           </div>
        <div class="pricing-box-content">
          <div class="pricing-box-features">
            <div class="feature-item" onclick="toggleFeatureDropdown('middle-feature-1')" style="color: #888;">
              <span>Upload drone GPS tracks to CalTopo (post flight)</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="middle-feature-1">
              Fly online or offline in Eagle Eyes Pilot [Pro] or DJI Pilot 2, then quickly upload your drone's GPS tracks to CalTopo once you're back in service.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=kL0-SSLd23c'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('middle-feature-2')" style="color: #888;">
              <span>Convert CalTopo search areas into DJI flight mission plans</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="middle-feature-2">
              Easily turn CalTopo search areas into KML files and import them into DJI Pilot 2 as ready-to-fly mission plans.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=0i_ph36RUqE'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('middle-feature-3')" style="color: #888;">
              <span>AirOps map view with live multi-drone tracking and Caltopo connection</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="middle-feature-3">
              When connected to the same local Wi-Fi network as drone controllers broadcasting their locations to the Eagle Eyes AirOps map (location broadcast is possible while flying in either Eagle Eyes Pilot [Pro] or DJI Pilot 2), view the AirOps map on your android device and see near-zero latency live multi-drone positions overlaid on CalTopo map features.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=__i8BL0HGOU&t=5s'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('middle-feature-3b')" style="color: #888;">
              <span>Eagle Eyes live stream viewer</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="middle-feature-3b">
              The <a href="https://www.eagleeyessearch.com/livestream/" target="_blank" rel="noopener" style="color: #007bff; text-decoration: underline;">Eagle Eyes Viewer</a> allows multiple drones to stream their live video and telemetry to remote observers. Once a drone pilot activates live streaming from Eagle Eyes Pilot (requires Pro account in Eagle Eyes Pilot) and shares a live stream link via QR code, URL, or unique join code, each drone appears on the viewer's device. Displayed on a shared map, with real-time position, altitude and synced Caltopo map objects. Viewers can then easily switch between drone live streams and share the stream on to others, enabling situational awareness and coordination whether you're beside the pilot or monitoring from a remote operations center.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://youtu.be/2U1mS0QmBrU'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('middle-feature-9')" style="color: #888;">
              <span>Track Pilot and Aircraft Logs</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="middle-feature-9">
              A complete flight history system that captures your GPS tracks, telemetry, and aircraft data in one place. Review where you flew, how the drone performed, and keep a clear record of your aircraft's activity, similar to an integrated AirData-style logbook.
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('middle-feature-4')">Fly your drone with Eagle Eyes Pilot app</div>
            <div class="feature-dropdown" id="middle-feature-4">
              Use Eagle Eyes Pilot as a complete piloting app with advanced flight controls and a map view that allows you to fly with reference to your CalTopo map.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://youtu.be/AcoXas2zgsY'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('middle-feature-4a')">
              <span>Livestream your drones real time view and telemetry from the Eagle Eyes pilot app.</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="middle-feature-4a">
              Share a QR code, URL, or unique alphanumeric code to allow remote observers to view your drone's livestream wirelessly via the <a href="https://www.eagleeyessearch.com/livestream/" target="_blank" rel="noopener" style="color: #007bff; text-decoration: underline;">Eagle Eyes Viewer</a>.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://youtu.be/2U1mS0QmBrU'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('middle-feature-5')">Real-time CalTopo live location / GPS tracking</div>
            <div class="feature-dropdown" id="middle-feature-5">
              Stream your drone's live GPS location and GPS tracks directly into CalTopo while flying in either Eagle Eyes Pilot or DJI Pilot 2.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=wyg47If033M'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview of CalTopo live tracking from Eagle Eyes Pilot</a><br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=gos2qwe04_Q'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview of CalTopo live tracking from DJI Pilot 2</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('middle-feature-6')">Add full res geolocated photos to CalTopo while the drone is in the air</div>
            <div class="feature-dropdown" id="middle-feature-6">
              Upload up to full-resolution geolocated drone images to CalTopo as photo points.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://youtu.be/AcoXas2zgsY?t=337'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('middle-feature-8')">
              <span>Custom autonomous drone mapping mission</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="middle-feature-8">
              Plan and Fly custom autonomous mapping missions on enterprise and mini 3 and 4 drones with full contorl of photo and video collection and access to customizable SAR specific search patterns.
            </div>
          </div>
        </div>
      </div>

                           <!-- Paid Plan Box -->
         <div class="pricing-box">
           <div class="pricing-box-header">
             <div class="header-top-section">
               <p style="font-size: 28px; font-weight: bold; color: #333;">Team</p>
                               <div class="section-description">
                  <p>Access to Eagle Eyes Computer Vision<br><button id="infoButton" onclick="document.getElementById('infoModal').style.display='flex';" style="background: none; border: none; color: #007bff; font-size: inherit; cursor: pointer; padding: 0; text-decoration: underline; font-family: inherit; margin-top: 0.5rem;">ⓘ License Terms and Options</button></p>
                </div>
             </div>
             <div class="header-bottom-section">
               <div class="section-price free-price" style="margin-top: 0;">
                 <p class="pricing-formula" id="pricingFormulaPublicSafety" style="margin: 0;">
                   <strong>USD $400 / year</strong> for 1st device<br>
                   +<strong>USD $150 / year</strong> per additional device
                 </p>
                 <p id="billingNotePublicSafety" style="font-size: 1.2rem; color: #666; margin-top: 0.5rem; text-align: center; min-height: 2.5rem;"></p>
               </div>
               <div class="section-button" style="display: flex; flex-direction: column; align-items: center; justify-content: center; margin-top: 0;">
                 <button class="secondary-button" style="min-width: 160px; margin-bottom: 0.5rem;" id="tryItFreeButtonPublicSafety">Try it free</button>
                 <p style="font-size: 1.2rem; color: #666; margin: 0; text-align: center;">Free 30-day trial. No credit card required.</p>
               </div>
             </div>
           </div>
           
           <!-- Device Selection Dropdown (Hidden Initially) -->
           <div id="deviceSelectionSection" style="display: none; padding: 2rem; background: #f8f9fa; border-top: 1px solid #e9ecef;">
              <div class="section-title">
                <h2>Select number of devices</h2>
              </div>
              <div class="section-description">
                <div class="device-calculator">
                  <div class="device-input-group">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 0;">
                      <button id="decreaseDevices" style="width: 35px; height: 40px; border: none; background: transparent; border-radius: 4px 0 0 4px; cursor: pointer; font-size: 18px; font-weight: 900;">−</button>
                      <input type="number" id="deviceCount" class="device-input" min="1" max="12" value="1">
                      <button id="increaseDevices" style="width: 35px; height: 40px; border: none; background: transparent; border-radius: 0 4px 4px 0; cursor: pointer; font-size: 18px; font-weight: 900;">+</button>
                   </div>
                   <div style="text-align: center; margin-top: 8px;">
                     <span style="font-size: 16px; color: #666;">device(s)</span>
                    </div>
                  </div>
                  <div class="pricing-formula">
                    <span id="customPricingText" style="font-size: 1.1rem; color: #888; font-style: italic; display: none;">* Custom pricing available for large organizations<br>
                    <a href="mailto:info@eagleeyessearch.com" style="color: var(--blue-highlight); text-decoration: none;">inquire at: info@eagleeyessearch.com</a></span>
                  </div>
                </div>
              </div>
              <div class="section-price">
                <p class="dollars" id="calculatedPrice">USD $400</p>
                <p style="font-size: 1.1rem; color: #666; margin-top: 0.5rem; line-height: 1.4;">Additional devices can be added at any time for a one-time fee of $20 for each month remaining in your current license term. For example, if you have 3 months left, the cost would be $60.</p>
              </div>
             
              <div class="section-button">
                <button style="min-width: 160px;" id="purchaseButton">Continue</button>
              </div>
           </div>
        <div class="pricing-box-content">
          <div class="pricing-box-features">
            <div class="feature-item" onclick="toggleFeatureDropdown('pro-feature-1')" style="color: #888;">
              <span>Upload drone GPS tracks to CalTopo (post flight)</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="pro-feature-1">
              Fly online or offline in Eagle Eyes Pilot [Pro] or DJI Pilot 2, then quickly upload your drone's GPS tracks to CalTopo once you're back in service.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=kL0-SSLd23c'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('pro-feature-2')" style="color: #888;">
              <span>Convert CalTopo search areas into DJI flight mission plans</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="pro-feature-2">
              Easily turn CalTopo search areas into KML files and import them into DJI Pilot 2 as ready-to-fly mission plans.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=0i_ph36RUqE'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('pro-feature-3')" style="color: #888;">
              <span>AirOps map view with live multi-drone tracking and Caltopo connection</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="pro-feature-3">
              When connected to the same local Wi-Fi network as drone controllers broadcasting their locations to the Eagle Eyes AirOps map (location broadcast is possible while flying in either Eagle Eyes Pilot [Pro] or DJI Pilot 2), view the AirOps map on your android device and see near-zero latency live multi-drone positions overlaid on CalTopo map features.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=__i8BL0HGOU&t=5s'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('pro-feature-3b')" style="color: #888;">
              <span>Eagle Eyes live stream viewer</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="pro-feature-3b">
              The <a href="https://www.eagleeyessearch.com/livestream/" target="_blank" rel="noopener" style="color: #007bff; text-decoration: underline;">Eagle Eyes Viewer</a> allows multiple drones to stream their live video and telemetry to remote observers. Once a drone pilot activates live streaming from Eagle Eyes Pilot (requires Pro account in Eagle Eyes Pilot) and shares a live stream link via QR code, URL, or unique join code, each drone appears on the viewer's device. Displayed on a shared map, with real-time position, altitude and synced Caltopo map objects. Viewers can then easily switch between drone live streams and share the stream on to others, enabling situational awareness and coordination whether you're beside the pilot or monitoring from a remote operations center.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://youtu.be/2U1mS0QmBrU'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('pro-feature-9')" style="color: #888;">
              <span>Track Pilot and Aircraft Logs</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="pro-feature-9">
              A complete flight history system that captures your GPS tracks, telemetry, and aircraft data in one place. Review where you flew, how the drone performed, and keep a clear record of your aircraft's activity, similar to an integrated AirData-style logbook.
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('pro-feature-4')">Fly your drone with Eagle Eyes Pilot app</div>
            <div class="feature-dropdown" id="pro-feature-4">
              Use Eagle Eyes Pilot as a complete piloting app with advanced flight controls and a map view that allows you to fly with reference to your CalTopo map.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://youtu.be/AcoXas2zgsY'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('pro-feature-4a')">
              <span>Livestream your drones real time view and telemetry from the Eagle Eyes pilot app.</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="pro-feature-4a">
              Share a QR code, URL, or unique alphanumeric code to allow remote observers to view your drone's livestream wirelessly via the <a href="https://www.eagleeyessearch.com/livestream/" target="_blank" rel="noopener" style="color: #007bff; text-decoration: underline;">Eagle Eyes Viewer</a>.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://youtu.be/2U1mS0QmBrU'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('pro-feature-5')">Real-time CalTopo live location / GPS tracking</div>
            <div class="feature-dropdown" id="pro-feature-5">
              Stream your drone's live GPS location and GPS tracks directly into CalTopo while flying in either Eagle Eyes Pilot or DJI Pilot 2.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=wyg47If033M'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview of CalTopo live tracking from Eagle Eyes Pilot</a><br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=gos2qwe04_Q'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview of CalTopo live tracking from DJI Pilot 2</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('pro-feature-6')">Add full res geolocated photos to CalTopo while the drone is in the air</div>
            <div class="feature-dropdown" id="pro-feature-6">
              Upload up to full-resolution geolocated drone images to CalTopo as photo points.<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://youtu.be/AcoXas2zgsY?t=337'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('pro-feature-8')">
              <span>Custom autonomous drone mapping mission</span>
              <div class="early-release-badge">BETA</div>
            </div>
            <div class="feature-dropdown" id="pro-feature-8">
              Plan and Fly custom autonomous mapping missions on enterprise and mini 3 and 4 drones with full contorl of photo and video collection and access to customizable SAR specific search patterns.
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('pro-feature-4b')">Full access to Eagle Eyes computer vision</div>
            <div class="feature-dropdown" id="pro-feature-4b">
              Computer vision color and motion anomaly detection, both real time on the live feed while the drone is in the air and for post processing analysis of recorded images and videos.
            </div>
            <div class="feature-item" onclick="toggleFeatureDropdown('pro-feature-7')">Full access to all Eagle Eyes Scan (desktop app) features</div>
            <div class="feature-dropdown" id="pro-feature-7">
              Access the full Eagle Eyes Scan feature set, including:<br>
              – Real-time detection on live drone imagery via clean HDMI feed (compatible with any drone capable of HDMI output)<br>
              – Real-time coordinate transmission from DJI drone controllers over local Wi-Fi networks to display drones live location on the Eagle Eyes Scan map (Eagle Eyes Pilot and DJI Pilot 2 are capable of outputting clean HDMI feed and transmitting coordinates over local Wi-Fi)<br>
              – Post-mission computer vision analysis of still images and video files<br>
              – Mosaic view for fast review of large image sets and videos, highlighting anomalies and geolocating detections (drone coordinates feature available for DJI and some Autel)<br>
              – Export detections as geolocated photo points into CalTopo or other mapping tools<br><br>
              <a href="javascript:void(0);" onclick="openVideoModal('https://www.youtube.com/watch?v=cwZ4tvBRdjA&t=2s'); return false;" style="color: #007bff; text-decoration: underline; cursor: pointer;">See video overview here</a>
            </div>
          </div>
        </div>
      </div>
              </div>
  </div>

  <!-- Modal -->
  <div id="infoModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="document.getElementById('infoModal').style.display='none';">&times;</span>
      <h3>License Terms and Options</h3>
      <p>Requires proof of affiliation with an approved public safety organization. Verification of affiliation typically takes 1–3 business days.</p>
      <div class="bullet">•</div>
      <p>Each team license is tied to one individual device. For example, one license will let you install Eagle Eyes on one drone controller or one laptop. To install Eagle Eyes on both a drone controller and a laptop would require two licenses, and so on.</p>
      <div class="bullet">•</div>
      <p>Once activated on a device, a license is permanently tied to that device. If a device is lost or another unexpected issue occurs, the Eagle Eyes team can help move your license to a replacement device on a case-by-case basis.</p>
      <div class="bullet">•</div>
      <p>Additional devices can be added at any time.</p>
    </div>
  </div>
  
  <!-- Modal for Pro -->
  <div id="infoModalPro" class="modal">
    <div class="modal-content">
      <span class="close" onclick="document.getElementById('infoModalPro').style.display='none';">&times;</span>
      <h3>License Terms and Options</h3>
      <p>No organizational affiliation is required. This subscription level <strong>does not include access to Eagle Eyes Computer Vision</strong>. For Computer Vision access, see our Teams subscription.</p>
      <div class="bullet">•</div>
      <p>Each account seat allows you to be actively signed into Eagle Eyes Pilot on one device at a time. Signing in on a second device will automatically sign you out of the first. Switch between devices seamlessly.</p>
      <div class="bullet">•</div>
      <p>Additional seats can be added at any time allowing users to access Eagle Eyes on multiple devices concurrently.</p>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Billing toggle functionality
        const billingToggle = document.getElementById('billingToggle');
        const billingLabelMonthly = document.getElementById('billingLabelMonthly');
        const billingLabelAnnual = document.getElementById('billingLabelAnnual');
        const billingSavings = document.getElementById('billingSavings');
        const pricingFormulaMiddle = document.getElementById('pricingFormulaMiddle');
        const pricingFormulaPublicSafety = document.getElementById('pricingFormulaPublicSafety');
        const billingNoteMiddle = document.getElementById('billingNoteMiddle');
        const billingNotePublicSafety = document.getElementById('billingNotePublicSafety');
        
        // Check if billing is annual (default: checked = annual)
        function isAnnualBilling() {
            return billingToggle.checked;
        }
        
        // Update pricing formulas based on billing period
        function updatePricingFormulas() {
            const isAnnual = isAnnualBilling();
            
            if (isAnnual) {
                // Annual billing - display monthly equivalent
                if (pricingFormulaMiddle) {
                    // Pro: $15/month equivalent when billed annually
                    pricingFormulaMiddle.innerHTML = '<strong>USD $15 / month</strong>';
                }
                if (pricingFormulaPublicSafety) {
                    // Public Safety: $250/year = $20/month equivalent
                    pricingFormulaPublicSafety.innerHTML = '<strong>USD $20 / month</strong>';
                }
                if (billingNoteMiddle) {
                    billingNoteMiddle.innerHTML = 'Per seat per month, billed annually<span class="billing-info-icon">ⓘ<span class="tooltip">One payment of US$ 180 per seat/year</span></span>';
                }
                if (billingNotePublicSafety) {
                    billingNotePublicSafety.innerHTML = 'Per seat per month, billed annually<span class="billing-info-icon">ⓘ<span class="tooltip">One payment of US$ 250 per seat/year</span></span>';
                }
                billingLabelMonthly.classList.remove('active');
                billingLabelAnnual.classList.add('active');
                if (billingSavings) billingSavings.style.display = 'inline';
            } else {
                // Monthly billing - display actual monthly rate
                if (pricingFormulaMiddle) {
                    // Pro: $20/month
                    pricingFormulaMiddle.innerHTML = '<strong>USD $20 / month</strong>';
                }
                if (pricingFormulaPublicSafety) {
                    // Public Safety: $30/month
                    pricingFormulaPublicSafety.innerHTML = '<strong>USD $30 / month</strong>';
                }
                if (billingNoteMiddle) {
                    billingNoteMiddle.innerHTML = 'Per seat per month, billed monthly<span class="billing-info-icon">ⓘ<span class="tooltip">US$ 20 per seat/month</span></span>';
                }
                if (billingNotePublicSafety) {
                    billingNotePublicSafety.innerHTML = 'Per seat per month, billed monthly<span class="billing-info-icon">ⓘ<span class="tooltip">US$ 30 per seat/month</span></span>';
                }
                billingLabelMonthly.classList.add('active');
                billingLabelAnnual.classList.remove('active');
                if (billingSavings) billingSavings.style.display = 'inline';
            }
            
            // Update calculated prices
            if (deviceInput && priceDisplay) updatePrice();
            if (deviceInputMiddle && priceDisplayMiddle) updatePriceMiddle();
        }
        
        // Listen for toggle changes
        if (billingToggle) {
            billingToggle.addEventListener('change', updatePricingFormulas);
        }
        
        // Initialize device count calculator elements (declare early for use in updatePricingFormulas)
        const deviceInput = document.getElementById('deviceCount');
        const priceDisplay = document.getElementById('calculatedPrice');
        const deviceInputMiddle = document.getElementById('deviceCountMiddle');
        const priceDisplayMiddle = document.getElementById('calculatedPriceMiddle');
        
        // Initialize pricing formulas
        updatePricingFormulas();
        
        // Initialize device count calculator
        const decreaseBtn = document.getElementById('decreaseDevices');
        const increaseBtn = document.getElementById('increaseDevices');
        const purchaseButton = document.getElementById('purchaseButton');
        
        function calculatePrice(deviceCount) {
            const isAnnual = isAnnualBilling();
            // Public Safety: $250/year = $20/month (annual) or $30/month (monthly)
            if (deviceCount < 1) return isAnnual ? 250 : 30;
            if (deviceCount > 12) deviceCount = 12; // Cap at 12 devices
            
            if (isAnnual) {
                // Public Safety: USD $250 per year (flat rate) = $20/month equivalent
                return 250;
            } else {
                // Monthly: USD $30 per month (flat rate)
                return 30;
            }
        }
        
        function calculatePricePro(deviceCount) {
            const isAnnual = isAnnualBilling();
            // Pro: $15/month annual = $180/year, $20/month monthly
            if (deviceCount < 1) return isAnnual ? 180 : 20;
            if (deviceCount > 12) deviceCount = 12; // Cap at 12 devices
            
            if (isAnnual) {
                // Pro tier: USD $180 per year (flat rate) = $15/month equivalent
                return 180;
            } else {
                // Monthly: USD $20 per month (flat rate)
                return 20;
            }
        }
        
        function updatePrice() {
            let deviceCount = parseInt(deviceInput.value) || 1;
            
            // Ensure device count is within valid range
            if (deviceCount > 12) {
                deviceCount = 12;
                deviceInput.value = 12;
            }
            if (deviceCount < 1) {
                deviceCount = 1;
                deviceInput.value = 1;
            }
            
            const price = calculatePrice(deviceCount);
            // Always display as monthly price
            const isAnnual = isAnnualBilling();
            // Public Safety: $250/year = $20/month equivalent, $30/month if monthly
            const monthlyPrice = isAnnual ? 20 : price;
            priceDisplay.textContent = `USD $${monthlyPrice.toLocaleString()} / month`;
            
            // Update button data attributes for purchase
            purchaseButton.setAttribute('data-device-count', deviceCount);
            
            // Show/hide custom pricing text based on device count
            const customPricingText = document.getElementById('customPricingText');
            if (deviceCount === 12) {
                customPricingText.style.display = 'inline';
            } else {
                customPricingText.style.display = 'none';
            }
        }
        
        // Handle input field changes (keyboard input)
        deviceInput.addEventListener('input', updatePrice);
        deviceInput.addEventListener('change', updatePrice);
        
        // Handle decrease button
        decreaseBtn.addEventListener('click', function() {
            let currentValue = parseInt(deviceInput.value) || 1;
            if (currentValue > 1) {
                deviceInput.value = currentValue - 1;
                updatePrice();
            }
        });
        
        // Handle increase button  
        increaseBtn.addEventListener('click', function() {
            let currentValue = parseInt(deviceInput.value) || 1;
            if (currentValue < 12) {
                deviceInput.value = currentValue + 1;
                updatePrice();
            }
        });
        
        // Initialize with default value
        updatePrice();
        
        // Initialize device count calculator for middle column
        const decreaseBtnMiddle = document.getElementById('decreaseDevicesMiddle');
        const increaseBtnMiddle = document.getElementById('increaseDevicesMiddle');
        const purchaseButtonMiddle = document.getElementById('purchaseButtonMiddle');
        
        function updatePriceMiddle() {
            let deviceCount = parseInt(deviceInputMiddle.value) || 1;
            
            // Ensure device count is within valid range
            if (deviceCount > 12) {
                deviceCount = 12;
                deviceInputMiddle.value = 12;
            }
            if (deviceCount < 1) {
                deviceCount = 1;
                deviceInputMiddle.value = 1;
            }
            
            const price = calculatePricePro(deviceCount);
            // Always display as monthly price
            const isAnnual = isAnnualBilling();
            // Pro: $15/month if annual, $20/month if monthly
            const monthlyPrice = isAnnual ? 15 : price;
            priceDisplayMiddle.textContent = `USD $${monthlyPrice.toLocaleString()} / month`;
            
            // Update button data attributes for purchase
            purchaseButtonMiddle.setAttribute('data-device-count', deviceCount);
            
            // Show/hide custom pricing text based on device count
            const customPricingTextMiddle = document.getElementById('customPricingTextMiddle');
            if (deviceCount === 12) {
                customPricingTextMiddle.style.display = 'inline';
            } else {
                customPricingTextMiddle.style.display = 'none';
            }
        }
        
        // Handle input field changes (keyboard input) for middle column
        if (deviceInputMiddle) {
            deviceInputMiddle.addEventListener('input', updatePriceMiddle);
            deviceInputMiddle.addEventListener('change', updatePriceMiddle);
        }
        
        // Handle decrease button for middle column
        if (decreaseBtnMiddle) {
            decreaseBtnMiddle.addEventListener('click', function() {
                let currentValue = parseInt(deviceInputMiddle.value) || 1;
                if (currentValue > 1) {
                    deviceInputMiddle.value = currentValue - 1;
                    updatePriceMiddle();
                }
            });
        }
        
        // Handle increase button for middle column
        if (increaseBtnMiddle) {
            increaseBtnMiddle.addEventListener('click', function() {
                let currentValue = parseInt(deviceInputMiddle.value) || 1;
                if (currentValue < 12) {
                    deviceInputMiddle.value = currentValue + 1;
                    updatePriceMiddle();
                }
            });
        }
        
        // Initialize with default value for middle column
        if (deviceInputMiddle) {
            updatePriceMiddle();
        }
        
        // Modal functionality
        const modal = document.getElementById('infoModal');
        const infoButton = document.getElementById('infoButton');
        const closeButtons = document.querySelectorAll('.close');
        
        // Open modal when info button is clicked
        if (infoButton && modal) {
            infoButton.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                modal.style.display = 'flex';
            });
        }
        
        // Close modal when X is clicked
        closeButtons.forEach(function(closeButton) {
            closeButton.addEventListener('click', function() {
                modal.style.display = 'none';
            });
        });
        
        // Close modal when clicking outside of it
        window.addEventListener('click', function(event) {
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });
        
        // Add click handlers to buttons
        const freeButton = document.querySelector('.pricing-box:first-child .section-button button');
        const paidButton = document.getElementById('purchaseButton');
        const deviceSelectionSection = document.getElementById('deviceSelectionSection');
        
        // Middle column buttons
        const tryItFreeButtonMiddle = document.getElementById('tryItFreeButtonMiddle');
        const tryItFreeButtonPublicSafety = document.getElementById('tryItFreeButtonPublicSafety');
        const paidButtonMiddle = document.getElementById('purchaseButtonMiddle');
        const deviceSelectionSectionMiddle = document.getElementById('deviceSelectionSectionMiddle');
        
        // Free plan button - redirect to geteagleeyes page
        freeButton.addEventListener('click', function() {
                        const url = new URL(getUrlWithEmulatorParam('{{ "/geteagleeyes/" | relative_url }}'), window.location.origin);
                        // Add machine_id if present in current URL
                        const currentMachineId = new URLSearchParams(window.location.search).get('machine_id');
                        if (currentMachineId) {
                            url.searchParams.set('machine_id', currentMachineId);
                        }
                        window.location.href = url.toString();
                    });
        
        
        // Middle column: Try it free button - goes to account page with trial reason
        if (tryItFreeButtonMiddle) {
            tryItFreeButtonMiddle.addEventListener('click', function() {
                const url = new URL(getUrlWithEmulatorParam('{{ "/account/" | relative_url }}'), window.location.origin);
                url.searchParams.set('reason', 'trial');
                
                // Add machine_id if present in current URL
                const currentMachineId = new URLSearchParams(window.location.search).get('machine_id');
                if (currentMachineId) {
                    url.searchParams.set('machine_id', currentMachineId);
                }
                
                window.location.href = url.toString();
            });
        }
        
        // Public Safety column: Try it free button - goes to account page with trial reason
        if (tryItFreeButtonPublicSafety) {
            tryItFreeButtonPublicSafety.addEventListener('click', function() {
                const url = new URL(getUrlWithEmulatorParam('{{ "/account/" | relative_url }}'), window.location.origin);
                url.searchParams.set('reason', 'trial');
                
                // Add machine_id if present in current URL
                const currentMachineId = new URLSearchParams(window.location.search).get('machine_id');
                if (currentMachineId) {
                    url.searchParams.set('machine_id', currentMachineId);
                }
                
                window.location.href = url.toString();
            });
        }
        
        // Paid plan button (after device selection)
        paidButton.addEventListener('click', function() {
                        const deviceCount = this.getAttribute('data-device-count');
                        
                        // Create a URL that includes device count information
                        const url = new URL(getUrlWithEmulatorParam('{{ "/account/?reason=purchase" | relative_url }}'), window.location.origin);
                        url.searchParams.set('device_count', deviceCount);
                        
                        // Add machine_id if present in current URL
                        const currentMachineId = new URLSearchParams(window.location.search).get('machine_id');
                        if (currentMachineId) {
                            url.searchParams.set('machine_id', currentMachineId);
                        }
                        
                        window.location.href = url.toString();
        });
        
        // Middle column: Paid plan button (after device selection)
        if (paidButtonMiddle) {
            paidButtonMiddle.addEventListener('click', function() {
                const deviceCount = this.getAttribute('data-device-count');
                
                // Create a URL that includes device count information
                const url = new URL(getUrlWithEmulatorParam('{{ "/account/?reason=purchase" | relative_url }}'), window.location.origin);
                url.searchParams.set('device_count', deviceCount);
                
                // Add machine_id if present in current URL
                const currentMachineId = new URLSearchParams(window.location.search).get('machine_id');
                if (currentMachineId) {
                    url.searchParams.set('machine_id', currentMachineId);
                }
                
                window.location.href = url.toString();
            });
        }
    });
    
    // Helper function to preserve emulator parameter
    function getUrlWithEmulatorParam(url) {
        const isEmulator = new URLSearchParams(window.location.search).get('is_emulator') === 'true';
        if (!isEmulator) return url;
        
        const separator = url.includes('?') ? '&' : '?';
        return url.includes('is_emulator=true') ? url : `${url}${separator}is_emulator=true`;
    }
    
    // Function to toggle feature dropdowns
    function toggleFeatureDropdown(featureId) {
        const dropdown = document.getElementById(featureId);
        const isVisible = dropdown.classList.contains('show');
        
        // Close all other dropdowns first
        document.querySelectorAll('.feature-dropdown').forEach(dd => {
            dd.classList.remove('show');
        });
        
        // Toggle the clicked dropdown
        if (!isVisible) {
            dropdown.classList.add('show');
        }
    }
    
    // Function to extract YouTube video ID from various URL formats
    window.extractYouTubeVideoId = function(url) {
      let videoId = '';
      let startTime = '';
      
      // Handle youtu.be format
      if (url.includes('youtu.be/')) {
        const match = url.match(/youtu\.be\/([^?&]+)/);
        if (match) videoId = match[1];
        const timeMatch = url.match(/[?&]t=(\d+)/);
        if (timeMatch) startTime = timeMatch[1];
      }
      // Handle youtube.com/watch format
      else if (url.includes('youtube.com/watch')) {
        const match = url.match(/[?&]v=([^&]+)/);
        if (match) videoId = match[1];
        const timeMatch = url.match(/[?&]t=(\d+)/);
        if (timeMatch) startTime = timeMatch[1];
      }
      
      return { videoId, startTime };
    };
    
    // Function to open YouTube video in modal
    window.openVideoModal = function(videoUrl) {
      const { videoId, startTime } = window.extractYouTubeVideoId(videoUrl);
      if (!videoId) {
        console.error('Could not extract video ID from URL:', videoUrl);
        return;
      }
      
      const modal = document.getElementById('videoModal');
      const iframeContainer = document.getElementById('videoModalIframe');
      
      if (!modal || !iframeContainer) {
        console.error('Modal elements not found');
        return;
      }
      
      let embedUrl = `https://www.youtube.com/embed/${videoId}`;
      const params = ['autoplay=1', 'rel=0'];
      if (startTime) {
        params.push(`start=${startTime}`);
      }
      embedUrl += '?' + params.join('&');
      
      iframeContainer.innerHTML = `<iframe src="${embedUrl}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>`;
      modal.classList.add('show');
      document.body.style.overflow = 'hidden';
    };
    
    // Function to close video modal
    window.closeVideoModal = function() {
      const modal = document.getElementById('videoModal');
      const iframeContainer = document.getElementById('videoModalIframe');
      
      if (modal) {
        modal.classList.remove('show');
      }
      if (iframeContainer) {
        iframeContainer.innerHTML = '';
      }
      document.body.style.overflow = '';
    };
    
    // Close modal when clicking outside the video or pressing Escape
    document.addEventListener('DOMContentLoaded', function() {
      const modal = document.getElementById('videoModal');
      if (modal) {
        modal.addEventListener('click', function(e) {
          if (e.target === modal) {
            window.closeVideoModal();
          }
        });
      }
      
      // Close modal on Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          const modal = document.getElementById('videoModal');
          if (modal && modal.classList.contains('show')) {
            window.closeVideoModal();
          }
        }
      });
    });
  </script>
  
  <!-- Video Modal -->
  <div id="videoModal" class="video-modal">
    <div class="video-modal-content">
      <span class="video-modal-close" onclick="closeVideoModal()">&times;</span>
      <div class="video-modal-iframe-container" id="videoModalIframe"></div>
    </div>
  </div>